inputs:
  - branch: master
    path: .tekton
    type: git
    service: ${github_tron_tektondefinitions}
  - branch: tkn_v1beta1
    path: git
    type: git
    service: ${github_tektoncatalog}
  - branch: tkn_v1beta1
    path: container-registry
    type: git
    service: ${github_tektoncatalog}
  - branch: tkn_v1beta1
    path: kubernetes-service
    type: git
    service: ${github_tektoncatalog}
  - branch: tkn_v1beta1
    path: slack
    type: git
    service: ${github_tektoncatalog}
  - branch: tkn_v1beta1
    path: devops-insights
    type: git
    service: ${github_tektoncatalog}
private_worker: ${private_worker07}
properties:
  # Properties to build operator and test it
  - name: toolchain-apikey
    type: secure
    value: ${toolchain-api-key}
  #
  - name: helm-chart
    type: text
    value: ${helm-chart-name}
  - name: ansible-roles-path
    type: text
    value: ${ansible-roles-path}
  - name: molecule-scenario-ci-test
    type: text
    value: ${molecule-scenario-ci-test}
  - name: molecule-scenario-cd-test
    type: text
    value: ${molecule-scenario-cd-test}
  #
  - name: artifactory-server-url
    type: text
    value: ${artifactory-server-url}
  - name: artifactory-repository
    type: text
    value: ${artifactory-repository}
  - name: artifactory-repository-path
    type: text
    value: ${artifactory-repository-path}
  - name: helm-repository-username
    type: text
    value: ${artifactory-username}
  - name: artifactory-apikey
    type: secure
    value: ${artifactory-api-key}
  #
  - name: apikey
    type: secure
    value: ${artifactory-apikey}
  - name: operator-image-url
    type: text
    value: us.icr.io/jauninb-tron/memcached-operator
  - name: registry-region
    type: text
    value: ${deploy-registry-region}
  - name: registry-namespace
    type: text
    value: ${deploy-registry-namespace}
  - name: deploy-region
    type: text
    value: ${deploy-region}
  - name: deploy-resource-group
    type: text
    value: ${deploy-resource-group}
  - name: test-cluster-name
    type: text
    value: ${test-cluster-name}
  - name: deploy-namespace
    type: text
    value: ${deploy-namespace}
  #
  - name: github-ibm-com-id_rsa-base64
    type: secure
    value: ""
  - name: github-ibm-com-id_rsa-pub
    type: secure
    value: ""
  #
  - name: tron-cd-trigger-webhook
    type: text
    value: ""
  - name: X-tron-ci_cd-token
    type: secure
    value: ""
triggers:
  - type: manual
    name: ci-master-manual
    eventListener: ansible-operator-ci-manual
    properties:
      - name: branch
        type: text
        value: "master"
      - name: repository
        type: text
        value: ${operator_repository_url}
  - type: git
    name: ci-master-commit
    eventListener: ansible-operator-ci-github-commit
    service: ${git_operator}
    branch: master
    events:
      push: true
  - eventListener: ansible-operator-test-manual
    name: test-operator-manual
    properties:
      - name: ansible-operator-configs-branch
        type: text
        value: "master"
      - name: ansible-operator-configs-repository
        type: text
        value: ${operator_configs_repository_url}
      - name: delete-release
        type: text
        value: ""
      - name: helm-chart-version
        type: text
        value: ""
      - name: molecule-tests-branch
        type: text
        value: "master"
      - name: molecule-tests-repository
        type: text
        value: ${operator_repository_url}
    type: manual
  # - eventListener: ansible-operator-test-webhook
  #   name: test-operator-webhook
  #   properties:
  #     - name: ansible-operator-configs-branch
  #       type: text
  #       value: "master"
  #     - name: ansible-operator-configs-repository
  #       type: text
  #       value: "https://github.ibm.com/watson-deploy-configs/demo-operator-configs"
  #     - name: delete-release
  #       type: text
  #       value: ""
  #   type: generic
